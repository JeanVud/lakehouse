
# This file was generated from:
# tools/scripts/deploy_new_service.py
# for more information run: python3 tools/scripts/deploy_new_service.py gen-config --help

# login to artifact repository with:
# gcloud auth configure-docker us-central1-docker.pkg.dev

# run skaffold dev in dev environemnt with:
# skaffold dev -f <path to this file>/skaffold.yaml -p dev
# run skaffold dev in prod environemnt with:
# skaffold dev -f <path to this file>/skaffold.yaml -p prod
# deploy canary version in skaffold dev mode with:
# skaffold dev -f <path to this file>/skaffold.yaml -p canary

---
apiVersion: skaffold/v4beta2
kind: Config
profiles:
  - name: dev
    deploy:
      helm:
        releases:
          - name: grist
            chartPath: mekong/grist/helm-deploy/grist
            namespace: pulse
            valuesFiles:
              - mekong/grist/helm-deploy/grist/values.yaml
              - mekong/grist/helm-deploy/grist/values-prod.yaml
              - mekong/grist/helm-deploy/grist/values-dev.yaml

  - name: prod
    deploy:
      helm:
        releases:
          - name: grist
            chartPath: mekong/grist/helm-deploy/grist
            namespace: pulse
            valuesFiles:
              - mekong/grist/helm-deploy/grist/values.yaml
              - mekong/grist/helm-deploy/grist/values-prod.yaml

